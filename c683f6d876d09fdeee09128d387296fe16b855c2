{"timestamp":"1437519311","reviewRef":"refs/heads/ojarjur/cleanup-dockerfile","targetRef":"refs/heads/master","requester":"ojarjur@google.com","reviewers":["ckerur@google.com"],"description":"Assorted cleanups of the Dockerfile:\n\n1.  Switch the base image from the old gcloud one (based on Debian wheezy) to just be Debian Jessie.\n2.  Reorder the Dockerfile into three logical sections:\n    a.  The instructions for building a base Phabricator image suitable for running anywhere.\n    b.  The instructions that make Phabricator run more seamlessly on the Google Cloud Platform.\n    c.  The instructions that add our extensions for mirroring to and from git-notes.\n3.  Comment the Dockerfile to explain why each step is necessary.\n4.  Collapse multiple sequence RUN commands into single RUN commands so that we build fewer image layers.\n5.  Explicitly install gcloud (since we are no longer inheriting it from the base image).\n6.  Inline the instructions that were in the install.sh script directly into the Dockerfile.\n7.  Update the phabricator.conf Apache configuration to work with newer versions of Apache.\n8.  Add an SQL_USER environment variable which allows Phabricator to use an SQL user other than \"root\".\n9.  Remove the old email.patch that hasn't been appliable for months anyway.\n10. Remove the old run-server.sh script that hasn't been tested in months."}
